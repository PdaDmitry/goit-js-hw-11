{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export class ImageServer {\n  constructor() {\n    // this.q = q;\n    this.KEY = '42263617-81d7156b9f7b88cd7b1016c2a';\n    // this.URL = `https://pixabay.com/api/?key=${this.KEY}&q=${q}&image_type=photo&orientation=horizontal&safesearch=true`;\n  }\n\n  getImages(value) {\n    const url = `https://pixabay.com/api/?key=${this.KEY}&q=${value}&image_type=photo&orientation=horizontal&safesearch=true`;\n    return fetch(url).then(response => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        throw new Error(response.status);\n      }\n    });\n  }\n}\n","export function createGalleryMarkup() {\n  return `\n  <form class=\"form\">\n    <input type=\"text\" name=\"picture\" placeholder=\"Search images...\" />\n    <button type=\"submit\">Search</button>\n  </form>\n  <span class=\"loader\"></span>\n  <ul class=\"gallery\"></ul>`;\n}\n\nexport function renderListGallery(images) {\n  const item = images\n    .map(el => {\n      const {\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = el;\n      return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      data-source=\"${largeImageURL}\"\n      alt=\"\"\n      title=\"${tags}\"\n    />\n    <ul class=\"image-info\">\n      <li class=\"info-item\">\n        <span class=\"info-item\">Likes</span>\n        <span class=\"item-quantity\">${likes}</span>\n      </li>\n       <li class=\"info-item\">\n        <span class=\"info-item\">Views</span>\n        <span class=\"item-quantity\">${views}</span>\n      </li>\n       <li class=\"info-item\">\n        <span class=\"info-item\">Comments</span>\n        <span class=\"item-quantity\">${comments}</span>\n      </li>\n       <li class=\"info-item\">\n        <span class=\"info-item\">Downloads</span>\n        <span class=\"item-quantity\">${downloads}</span>\n      </li>\n    </ul>\n  </a>\n  </li>`;\n    })\n    .join('\\n\\n');\n\n  return item;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { ImageServer } from './js/pixabay-api';\nimport { createGalleryMarkup, renderListGallery } from './js/render-functions';\n\nconst galleryMarkup = createGalleryMarkup();\n\nconst body = document.querySelector('body');\nbody.insertAdjacentHTML('afterbegin', galleryMarkup);\n\nconst formEl = document.querySelector('form');\n\nconst loader = document.querySelector('.loader');\nloader.classList.add('is-hidden');\n\nconst gallery = document.querySelector('.gallery');\n\nconst input = document.querySelector('input');\ninput.classList.add('input');\n\nconst button = document.querySelector('button');\nbutton.classList.add('btn-search');\n\nconst images = new ImageServer();\nconst show = new SimpleLightbox('.gallery a');\n\nfunction showIziToast(text) {\n  return iziToast.show({\n    message: text,\n    messageSize: '16px',\n    messageWeight: '400',\n    backgroundColor: '#ef4040',\n    messageColor: '#fff',\n    position: 'topRight',\n    iconUrl: './img/error.svg',\n  });\n}\n\nformEl.addEventListener('submit', e => {\n  e.preventDefault();\n  gallery.innerHTML = '';\n\n  let q = e.target.elements.picture.value.trim();\n  if (!q) {\n    e.target.reset();\n    return showIziToast('The form field must be filled in!');\n  }\n\n  loader.classList.remove('is-hidden');\n\n  images\n    .getImages(q)\n    .then(data => {\n      if (data.hits.length === 0) {\n        showIziToast(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n      }\n\n      const galleryHtml = renderListGallery(data.hits);\n      gallery.innerHTML = galleryHtml;\n\n      show.refresh();\n    })\n    .catch(error => {\n      console.log(error);\n    })\n    .finally(() => {\n      loader.classList.add('is-hidden');\n      e.target.reset();\n    });\n});\n"],"names":["ImageServer","value","url","response","createGalleryMarkup","renderListGallery","images","el","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryMarkup","body","formEl","loader","gallery","input","button","show","SimpleLightbox","showIziToast","text","iziToast","e","q","data","galleryHtml","error"],"mappings":"6vBAAO,MAAMA,CAAY,CACvB,aAAc,CAEZ,KAAK,IAAM,oCAEZ,CAED,UAAUC,EAAO,CACf,MAAMC,EAAM,gCAAgC,KAAK,GAAG,MAAMD,CAAK,2DAC/D,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAY,CACjC,GAAIA,EAAS,GACX,OAAOA,EAAS,OAEhB,MAAM,IAAI,MAAMA,EAAS,MAAM,CAEvC,CAAK,CACF,CACH,CCjBO,SAASC,GAAsB,CACpC,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAOT,CAEO,SAASC,EAAkBC,EAAQ,CA4CxC,OA3CaA,EACV,IAAIC,GAAM,CACT,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA,kCACqBE,CAAa;AAAA;AAAA;AAAA,aAGlCD,CAAY;AAAA,qBACJC,CAAa;AAAA;AAAA,eAEnBC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,sCAKmBC,CAAK;AAAA;AAAA;AAAA;AAAA,sCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,sCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,sCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,QAK/C,CAAK,EACA,KAAK;AAAA;AAAA,CAAM,CAGhB,CC9CA,MAAMC,EAAgBX,EAAmB,EAEnCY,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,mBAAmB,aAAcD,CAAa,EAEnD,MAAME,EAAS,SAAS,cAAc,MAAM,EAEtCC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,UAAU,IAAI,WAAW,EAEhC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,UAAU,IAAI,OAAO,EAE3B,MAAMC,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,UAAU,IAAI,YAAY,EAEjC,MAAMf,EAAS,IAAIN,EACbsB,EAAO,IAAIC,EAAe,YAAY,EAE5C,SAASC,EAAaC,EAAM,CAC1B,OAAOC,EAAS,KAAK,CACnB,QAASD,EACT,YAAa,OACb,cAAe,MACf,gBAAiB,UACjB,aAAc,OACd,SAAU,WACV,QAAS,iBACb,CAAG,CACH,CAEAR,EAAO,iBAAiB,SAAUU,GAAK,CACrCA,EAAE,eAAc,EAChBR,EAAQ,UAAY,GAEpB,IAAIS,EAAID,EAAE,OAAO,SAAS,QAAQ,MAAM,OACxC,GAAI,CAACC,EACH,OAAAD,EAAE,OAAO,QACFH,EAAa,mCAAmC,EAGzDN,EAAO,UAAU,OAAO,WAAW,EAEnCZ,EACG,UAAUsB,CAAC,EACX,KAAKC,GAAQ,CACRA,EAAK,KAAK,SAAW,GACvBL,EACE,0EACV,EAGM,MAAMM,EAAczB,EAAkBwB,EAAK,IAAI,EAC/CV,EAAQ,UAAYW,EAEpBR,EAAK,QAAO,CAClB,CAAK,EACA,MAAMS,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,EACA,QAAQ,IAAM,CACbb,EAAO,UAAU,IAAI,WAAW,EAChCS,EAAE,OAAO,OACf,CAAK,CACL,CAAC"}